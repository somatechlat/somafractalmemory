# Default values for somafractalmemory.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: somafractalmemory
  pullPolicy: Never
  # Overrides the image tag whose default is the chart appVersion.
  tag: "latest"

somaSecretKey: "dev-secret-change-me"
somaAllowedHosts: "*"
somaDbName: "somamemory"
somaDbUser: "soma"

resources:
  limits:
    cpu: "1"
    memory: "2Gi"
  requests:
    cpu: "250m"
    memory: "512Mi"

service:
  type: ClusterIP
  port: 10101
  targetPort: 10101

ingress:
  enabled: false
  className: ""
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: Prefix
  tls: []

postgres:
  enabled: true
  replicaCount: 1
  image:
    repository: postgres
    tag: 15
  service:
    port: 40021
    targetPort: 5432
  containerPort: 5432
  persistence:
    enabled: false
    size: 10Gi

redis:
  enabled: true
  replicaCount: 1
  image:
    repository: redis
    tag: 7
  service:
    port: 40022
    targetPort: 6379
  containerPort: 6379
  persistence:
    enabled: false
    size: 5Gi

secrets:
  create: false
  apiTokenSecretName: "soma-api-token"
  postgresPasswordSecretName: "soma-postgres-password"
  # Optional: used only if `secrets.create` is true
  apiTokenLiteral: ""
  postgresPasswordLiteral: ""

  backup:
    enabled: false
    schedule: "0 3 * * *"
    image: "somafractalmemory:latest"
    backupDir: "/backups"
    dataDir: "/data"
